#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "${SCRIPT_DIR}/.." && pwd)"
PYTHON_CMD="${PYTHON_BIN:-${PYTHON:-python3}}"

if ! command -v "${PYTHON_CMD}" >/dev/null 2>&1; then
  echo "[wbscanner-mcp] Unable to find python interpreter '${PYTHON_CMD}'." >&2
  exit 127
fi

export PYTHONPATH="${REPO_ROOT}/scripts/agent_orchestrator:${PYTHONPATH:-}"
exec "${PYTHON_CMD}" -m agent_orchestrator.mcp_server "$@"
