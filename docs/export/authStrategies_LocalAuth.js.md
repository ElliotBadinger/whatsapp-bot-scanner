whatsapp-web.js 1.34.1 &raquo; Source: authStrategies/LocalAuth.js

        [whatsapp-web.js 1.34.1](index.html)

            # Source: authStrategies/LocalAuth.js

            ```
&#x27;use strict&#x27;;

const path &#x3D; require(&#x27;path&#x27;);
const fs &#x3D; require(&#x27;fs&#x27;);
const BaseAuthStrategy &#x3D; require(&#x27;./BaseAuthStrategy&#x27;);

/**
 * Local directory-based authentication
 * @param {object} options - options
 * @param {string} options.clientId - Client id to distinguish instances if you are using multiple, otherwise keep null if you are using only one instance
 * @param {string} options.dataPath - Change the default path for saving session files, default is: &quot;./.wwebjs_auth/&quot; 
 * @param {number} options.rmMaxRetries - Sets the maximum number of retries for removing the session directory
*/
class LocalAuth extends BaseAuthStrategy {
    constructor({ clientId, dataPath, rmMaxRetries }&#x3D;{}) {
        super();

        const idRegex &#x3D; /^[-_\w]+$/i;
        if(clientId &amp;&amp; !idRegex.test(clientId)) {
            throw new Error(&#x27;Invalid clientId. Only alphanumeric characters, underscores and hyphens are allowed.&#x27;);
        }

        this.dataPath &#x3D; path.resolve(dataPath || &#x27;./.wwebjs_auth/&#x27;);
        this.clientId &#x3D; clientId;
        this.rmMaxRetries &#x3D; rmMaxRetries ?? 4;
    }

    async beforeBrowserInitialized() {
        const puppeteerOpts &#x3D; this.client.options.puppeteer;
        const sessionDirName &#x3D; this.clientId ? &#x60;session-${this.clientId}&#x60; : &#x27;session&#x27;;
        const dirPath &#x3D; path.join(this.dataPath, sessionDirName);

        if(puppeteerOpts.userDataDir &amp;&amp; puppeteerOpts.userDataDir !&#x3D;&#x3D; dirPath) {
            throw new Error(&#x27;LocalAuth is not compatible with a user-supplied userDataDir.&#x27;);
        }

        fs.mkdirSync(dirPath, { recursive: true });
        
        this.client.options.puppeteer &#x3D; {
            ...puppeteerOpts,
            userDataDir: dirPath
        };

        this.userDataDir &#x3D; dirPath;
    }

    async logout() {
        if (this.userDataDir) {
            await fs.promises.rm(this.userDataDir, { recursive: true, force: true, maxRetries: this.rmMaxRetries })
                .catch((e) &#x3D;> {
                    throw new Error(e);
                });
        }
    }

}

module.exports &#x3D; LocalAuth;

```

        Generated by [JSDoc](https://github.com/jsdoc3/jsdoc) 3.6.11 on October 23, 2025.